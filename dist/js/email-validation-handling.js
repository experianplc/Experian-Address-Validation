document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("email"),t=document.getElementById("validate-email-button"),n=document.getElementById("email-validation-result");let d,i=document.getElementById("email-validation-error");i||(i=document.createElement("div"),i.id="email-validation-error",i.className="validation-inline-error hidden",t.insertAdjacentElement("afterend",i)),window.addEventListener("validation-token-set",e=>{var t;t=e.detail.token,d=new EmailValidation({token:t})},{once:!0}),t.disabled=!0,window.addEventListener("validation-token-set",()=>{t.disabled=!1},{once:!0}),t.addEventListener("click",function(){const t=e.value;if(d){if(!t.trim())return i.textContent="Please enter an email address before validating.",i.classList.remove("hidden"),void i.classList.add("fade-in");i.textContent="",i.classList.add("hidden"),i.classList.remove("fade-in"),d.validateEmail(t)}else alert("Please enter a token first.")}),window.addEventListener("validation-token-set",()=>{d&&d.events.on("post-validation",function(e){const t=document.getElementById("validation-result-body");n.classList.remove("hidden"),t.innerHTML="",i.textContent="",i.classList.add("hidden"),i.classList.remove("fade-in");const d={"result.email":"Email","result.confidence":"Status","result.verbose_output":"Verbose Output","metadata.domain_detail.type":"Type"},a=(e,t)=>t.split(".").reduce((e,t)=>e&&e[t],e);for(const n in d){const i=d[n],o=a(e,n);if(void 0!==o){const e=document.createElement("tr"),n=document.createElement("td");n.innerText=i,n.className="result-label-cell";const d=document.createElement("td");d.innerText=o,e.appendChild(n),e.appendChild(d),t.appendChild(e)}}})},{once:!0}),window.addEventListener("validation-token-set",()=>{d&&d.events.on("validation-error",function(e){n.classList.remove("hidden"),n.innerText=`Error: ${e}`,i.textContent="",i.classList.add("hidden"),i.classList.remove("fade-in")})},{once:!0}),e.addEventListener("input",()=>{e.value.trim()&&(i.textContent="",i.classList.add("hidden"),i.classList.remove("fade-in"))})});