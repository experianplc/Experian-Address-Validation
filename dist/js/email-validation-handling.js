document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("email"),t=document.getElementById("validate-email-button"),n=document.getElementById("email-validation-result");let i,a=document.getElementById("email-validation-error");a||(a=document.createElement("div"),a.id="email-validation-error",a.className="validation-inline-error hidden",t.insertAdjacentElement("afterend",a)),window.addEventListener("validation-token-set",(e=>{var t;t=e.detail.token,i=new EmailValidation({token:t})}),{once:!0}),t.disabled=!0,window.addEventListener("validation-token-set",(()=>{t.disabled=!1}),{once:!0}),t.addEventListener("click",(function(){const n=e.value;if(i){if(!n.trim())return a.textContent="Please enter an email address before validating.",a.classList.remove("hidden"),void a.classList.add("fade-in");if(a.textContent="",a.classList.add("hidden"),a.classList.remove("fade-in"),window.RateLimiter&&"function"==typeof window.RateLimiter.allowCall)return t.disabled=!0,void window.RateLimiter.allowCall().then((function(e){if(t.disabled=!1,!e.allowed)return a.textContent="You have reached the maximum of 10 validations in 24 hours.",a.classList.remove("hidden"),void a.classList.add("fade-in");i.validateEmail(n)})).catch((function(){t.disabled=!1,i.validateEmail(n)}));i.validateEmail(n)}else alert("Please enter a token first.")})),window.addEventListener("validation-token-set",(()=>{i&&i.events.on("post-validation",(function(e){const t=document.getElementById("validation-result-body");n.classList.remove("hidden"),t.innerHTML="",a.textContent="",a.classList.add("hidden"),a.classList.remove("fade-in");const i={"result.email":"Email","result.confidence":"Status","result.verbose_output":"Verbose Output","metadata.domain_detail.type":"Type"};for(const n in i){const a=i[n],o=(d=e,n.split(".").reduce(((e,t)=>e&&e[t]),d));if(void 0!==o){const e=document.createElement("tr"),n=document.createElement("td");n.innerText=a,n.className="result-label-cell";const i=document.createElement("td");i.innerText=o,e.appendChild(n),e.appendChild(i),t.appendChild(e)}}var d}))}),{once:!0}),window.addEventListener("validation-token-set",(()=>{i&&i.events.on("validation-error",(function(e){n.classList.remove("hidden"),n.innerText=`Error: ${e}`,a.textContent="",a.classList.add("hidden"),a.classList.remove("fade-in")}))}),{once:!0}),e.addEventListener("input",(()=>{e.value.trim()&&(a.textContent="",a.classList.add("hidden"),a.classList.remove("fade-in"))}))}));