document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("phone"),t=document.getElementById("validate-phone-button"),n=document.getElementById("phone-validation-result"),d=document.getElementById("country-code");let a,o=document.getElementById("phone-validation-error");o||(o=document.createElement("div"),o.id="phone-validation-error",o.className="validation-inline-error hidden",t.insertAdjacentElement("afterend",o)),window.addEventListener("validation-token-set",(e=>{var t;t=e.detail.token,a=new PhoneValidation({token:t})}),{once:!0}),t.disabled=!0,window.addEventListener("validation-token-set",(()=>{t.disabled=!1}),{once:!0}),t.addEventListener("click",(function(){const t=e.value,n=d.value;if(!a)return void alert("Please enter a token first.");if(!n)return o.textContent="Please select a country before validating the phone number.",o.classList.remove("hidden"),void o.classList.add("fade-in");o.textContent="",o.classList.add("hidden"),o.classList.remove("fade-in");const i={number:t,output_format:"NATIONAL",cache_value_days:0,country_iso:n,get_ported_date:!0,get_disposable_number:!0};a.validatePhone(i)})),window.addEventListener("validation-token-set",(()=>{a&&a.events.on("post-validation",(function(e){const t=document.getElementById("phone-validation-result-body");n.classList.remove("hidden"),t.innerHTML="";const d={"result.number":"Phone Number","result.validated_phone_number":"Validated Phone Number","result.formatted_phone_number":"Formatted Phone Number","result.phone_type":"Type","result.confidence":"Confidence","result.ported_date":"Ported Date","result.disposable_number":"Disposable number"};for(const n in d){const o=d[n],i=(a=e,n.split(".").reduce(((e,t)=>e&&e[t]),a));if(void 0!==i){const e=document.createElement("tr"),n=document.createElement("td");n.innerText=o,n.className="result-label-cell";const d=document.createElement("td");d.innerText=i,e.appendChild(n),e.appendChild(d),t.appendChild(e)}}var a;if(e.metadata&&e.metadata.phone_detail){const n=e.metadata.phone_detail;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const d=document.createElement("tr"),a=document.createElement("td");a.innerText=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),a.className="result-label-cell";const o=document.createElement("td");o.innerText=n[e],d.appendChild(a),d.appendChild(o),t.appendChild(d)}}}))}),{once:!0}),window.addEventListener("validation-token-set",(()=>{a&&a.events.on("validation-error",(function(e){n.classList.remove("hidden"),n.innerText=`Error: ${e}`,o.textContent="",o.classList.add("hidden"),o.classList.remove("fade-in")}))}),{once:!0}),d.addEventListener("change",(()=>{d.value&&(o.textContent="",o.classList.add("hidden"),o.classList.remove("fade-in"))}))}));